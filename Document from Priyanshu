#include <stdio.h>
// #include <windows.h>
int i, j, r1, c1, r2, c2, x = 0, c = 0, m = 0;
char a[3][3], p1[20], p2[20];
int begin()
{
    for (i = 0; i < 3; i++)
    {
        for (j = 0; j < 3; j++)
        {
            a[i][j] = ' ';
        }
    }
    print();
}
int print()
{
    for (i = 0; i < 3; i++)
    {
        for (j = 0; j < 3; j++)
        {
            printf(" %c ", a[i][j]);
            if (j < 2)
                printf("|");
        }
        if (i < 2)
            printf("\n-----------\n");
        else
            printf("\n");
    }
}
int intro1()
{
    printf("Welcome to Tic Tac Toe game\n");
    printf("Enter player 1 name : ");
    scanf("%s", p1);
    getchar();
    printf("Enter player 2 name : ");
    scanf("%s", p2);
    printf("Let's start Playing\n");
}
int intro2()
{
    printf("Welcome to Tic Tac Toe game\n");
    printf("Enter player 1 name : ");
    scanf("%s", p1);
    printf("Let's start Playing\n");
}
int logic1()
{
    if ((a[0][0] == 'X') && (a[1][1] == 'X') && (a[2][2] == 'X'))
        x = 1;
    if ((a[0][2] == 'X') && (a[1][1] == 'X') && (a[2][0] == 'X'))
        x = 1;
    if ((a[0][0] == 'X') && (a[0][1] == 'X') && (a[0][2] == 'X'))
        x = 1;
    if ((a[1][0] == 'X') && (a[1][1] == 'X') && (a[1][2] == 'X'))
        x = 1;
    if ((a[2][0] == 'X') && (a[2][1] == 'X') && (a[2][2] == 'X'))
        x = 1;
    if ((a[0][0] == 'X') && (a[1][0] == 'X') && (a[2][0] == 'X'))
        x = 1;
    if ((a[0][1] == 'X') && (a[1][1] == 'X') && (a[2][1] == 'X'))
        x = 1;
    if ((a[0][2] == 'X') && (a[1][2] == 'X') && (a[2][2] == 'X'))
        x = 1;
}
int logic2()
{
    if ((a[0][0] == 'O') && (a[1][1] == 'O') && (a[2][2] == 'O'))
        x = 2;
    if ((a[0][2] == 'O') && (a[1][1] == 'O') && (a[2][0] == 'O'))
        x = 2;
    if ((a[0][0] == 'O') && (a[0][1] == 'O') && (a[0][2] == 'O'))
        x = 2;
    if ((a[1][0] == 'O') && (a[1][1] == 'O') && (a[1][2] == 'O'))
        x = 2;
    if ((a[2][0] == 'O') && (a[2][1] == 'O') && (a[2][2] == 'O'))
        x = 2;
    if ((a[0][0] == 'O') && (a[1][0] == 'O') && (a[2][0] == 'O'))
        x = 2;
    if ((a[0][1] == 'O') && (a[1][1] == 'O') && (a[2][1] == 'O'))
        x = 2;
    if ((a[0][2] == 'O') && (a[1][2] == 'O') && (a[2][2] == 'O'))
        x = 2;
}
int main()
{
    begin();
    printf("   Game mode\n");
    printf("1. Two Player\n");
    printf("2. Against Computer\n");
    printf("Enter Your Choice  = ");
    int choice;
    scanf("%d", &choice);
    switch (choice)
    {
    case 1:
        intro2();
        while (1)
        {

            do
            {
                printf("Enter Row and column %s = ", p1);
                scanf("%d", &r1);
                scanf("%d", &c1);
                m++;
            } while ((a[r1][c1] == 'X') || (a[r1][c1] == 'O'));
            c++;
            a[r1][c1] = 'X';
            print();
            logic1();
            if (x == 1)
                break;
            do
            {
                printf("Enter Row and column %s = ", p1);
                scanf("%d", &r2);
                scanf("%d", &c2);
                m++;
            } while ((a[r2][c2] == 'X') || (a[r2][c2] == 'O'));
            c++;
            a[r2][c2] = 'O';
            print();
            logic2();
            if ((x == 2))
                break;
            if (c == 8)
            {
                printf("Tie");
                break;
            }
        }
        if (x == 1)
            printf("%s won the game", p1);
        if (x == 2)
            printf("%s won the game", p2);
        break;

    case 2:
        intro2();
        while (1)
        {

            do
            {
                printf("Enter Row and column %s = ", p1);
                scanf("%d", &r1);
                scanf("%d", &c1);
                m++;
            } while ((a[r1][c1] == 'X') || (a[r1][c1] == 'O'));
            a[r1][c1] = 'X';
            print();
            logic1();
            if (x == 1)
                break;
            do
            {
                srand(time(NULL));
                r2 = rand() % (3);
                c2 = rand() % (3);
            } while ((a[r2][c2] == 'X') || (a[r2][c2] == 'O'));
            c++;
            a[r2][c2] = 'O';
            print();
            logic2();
            if ((x == 2))
                break;
            if (c == 8)
            {
                printf("Tie");
                break;
            }
        }
        if (x == 1)
            printf("%s won the game", p1);
        if (x == 2)
            printf("Computer won the game");
        break;
    }
}